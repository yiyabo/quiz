# ğŸ¯ å¤šç«èµ›åŠŸèƒ½è¯´æ˜

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### åç«¯ (Backend)

1. **æ•°æ®åº“æ¨¡å‹æ›´æ–°**
   - âœ… æ·»åŠ  `Competition` è¡¨ï¼ˆç«èµ›è¡¨ï¼‰
   - âœ… `Submission` è¡¨å…³è”åˆ° `competition_id`
   - âœ… è‡ªåŠ¨åˆå§‹åŒ–ä¸¤ä¸ªç«èµ›æ•°æ®

2. **ç«èµ›æ•°æ®**
   - âœ… PPIç«èµ›ï¼ˆè›‹ç™½è´¨ç›¸äº’ä½œç”¨é¢„æµ‹ï¼‰
   - âœ… CCIç«èµ›ï¼ˆç»†èƒé—´ç›¸äº’ä½œç”¨é¢„æµ‹ï¼‰

3. **APIæ¥å£**
   - âœ… `GET /api/competitions` - è·å–ç«èµ›åˆ—è¡¨
   - âœ… `GET /api/competitions/{id}` - è·å–ç«èµ›è¯¦æƒ…
   - âœ… `POST /api/submissions?competition_id=X` - æäº¤æ—¶æŒ‡å®šç«èµ›
   - âœ… `GET /api/leaderboard?competition_id=X` - æŒ‰ç«èµ›ç­›é€‰æ’è¡Œæ¦œ
   - âœ… `GET /api/download/dataset/{competition_id}` - ä¸‹è½½ç«èµ›æ•°æ®é›†

4. **è¯„åˆ†ç³»ç»Ÿ**
   - âœ… `scoring.py` - PPIç«èµ›è¯„åˆ†ï¼ˆprotein_A, protein_B, predictionï¼‰
   - âœ… `scoring_cci.py` - CCIç«èµ›è¯„åˆ†ï¼ˆsource, target, labelï¼‰
   - âœ… ä¸¤ä¸ªç«èµ›ä½¿ç”¨ç›¸åŒçš„åŠ æƒè¯„åˆ†æ ‡å‡†

### å‰ç«¯ (Frontend)

1. **APIæ¥å£é€‚é…**
   - âœ… æ·»åŠ  `competitionAPI` - ç«èµ›æ¥å£
   - âœ… æ›´æ–° `submissionAPI` - æ”¯æŒç«èµ›IDå‚æ•°
   - âœ… æ›´æ–° `leaderboardAPI` - æ”¯æŒç«èµ›ç­›é€‰
   - âœ… æ›´æ–° `downloadAPI` - æ”¯æŒç«èµ›ID

2. **çŠ¶æ€ç®¡ç†**
   - âœ… åˆ›å»º `stores/competition.js` - ç«èµ›çŠ¶æ€ç®¡ç†
   - âœ… ç«èµ›é€‰æ‹©å’Œåˆ‡æ¢åŠŸèƒ½

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### å¯åŠ¨ç³»ç»Ÿ

1. **å¯åŠ¨åç«¯**ï¼ˆä¼šè‡ªåŠ¨åˆå§‹åŒ–ä¸¤ä¸ªç«èµ›ï¼‰
   ```bash
   cd /Users/apple/work/quiz/backend
   conda activate quiz
   python main.py
   ```
   
   çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯è¡¨ç¤ºæˆåŠŸï¼š
   ```
   âœ… æ•°æ®åº“åˆå§‹åŒ–å®Œæˆ
   âœ… ç«èµ›æ•°æ®åˆå§‹åŒ–å®Œæˆ
   INFO:     Uvicorn running on http://0.0.0.0:8000
   ```

2. **æµ‹è¯•API**ï¼ˆå¯é€‰ï¼‰
   ```bash
   # è·å–ç«èµ›åˆ—è¡¨
   curl http://localhost:8000/api/competitions
   
   # åº”è¯¥è¿”å›ä¸¤ä¸ªç«èµ›ï¼š
   # [
   #   {"id":1,"name":"ppi","title":"è›‹ç™½è´¨ç›¸äº’ä½œç”¨é¢„æµ‹",...},
   #   {"id":2,"name":"cci","title":"ç»†èƒé—´ç›¸äº’ä½œç”¨é¢„æµ‹",...}
   # ]
   ```

3. **å¯åŠ¨å‰ç«¯**ï¼ˆåœ¨æ–°ç»ˆç«¯ï¼‰
   ```bash
   cd /Users/apple/work/quiz/frontend
   npm run dev
   ```

---

## ğŸ“Š ä¸¤ä¸ªç«èµ›çš„åŒºåˆ«

### 1. PPIç«èµ›ï¼ˆè›‹ç™½è´¨ç›¸äº’ä½œç”¨é¢„æµ‹ï¼‰

**æ•°æ®é›†**: `kaggle_dataset.tar.gz`

**æäº¤æ ¼å¼**:
```csv
protein_A,protein_B,prediction
9606.ENSP00000178640,9606.ENSP00000256458,1
9606.ENSP00000253727,9606.ENSP00000257724,0
```

**ç­”æ¡ˆæ–‡ä»¶**: `teacher_only/test_labels.csv`

**æµ‹è¯•é›†**: 1,525 ä¸ªæ ·æœ¬

---

### 2. CCIç«èµ›ï¼ˆç»†èƒé—´ç›¸äº’ä½œç”¨é¢„æµ‹ï¼‰

**æ•°æ®é›†**: `cci test/dataset.tar.gz`ï¼ˆåŒ…å«.h5adæ–‡ä»¶ï¼‰

**æäº¤æ ¼å¼**:
```csv
source,target,label
1999,2313,1
4252,1273,0
```

**ç­”æ¡ˆæ–‡ä»¶**: `cci test/answer/test_edges.csv`

**æµ‹è¯•é›†**: 4,000 ä¸ªæ ·æœ¬

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### æ–¹æ³•1: ä½¿ç”¨APIç›´æ¥æµ‹è¯•

```bash
# 1. æ³¨å†Œç”¨æˆ·
curl -X POST http://localhost:8000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"username":"testuser","email":"test@example.com","password":"123456"}'

# 2. è·å–tokenï¼ˆä»è¿”å›çš„JSONä¸­å¤åˆ¶access_tokenï¼‰
TOKEN="your_token_here"

# 3. ä¸‹è½½PPIæ•°æ®é›†
curl -H "Authorization: Bearer $TOKEN" \
  http://localhost:8000/api/download/dataset/1 \
  -o ppi_dataset.tar.gz

# 4. ä¸‹è½½CCIæ•°æ®é›†
curl -H "Authorization: Bearer $TOKEN" \
  http://localhost:8000/api/download/dataset/2 \
  -o cci_dataset.tar.gz

# 5. æäº¤åˆ°PPIç«èµ›
curl -X POST "http://localhost:8000/api/submissions?competition_id=1" \
  -H "Authorization: Bearer $TOKEN" \
  -F "file=@path/to/your/submission.csv"

# 6. æäº¤åˆ°CCIç«èµ›
curl -X POST "http://localhost:8000/api/submissions?competition_id=2" \
  -H "Authorization: Bearer $TOKEN" \
  -F "file=@path/to/your/submission.csv"

# 7. æŸ¥çœ‹PPIæ’è¡Œæ¦œ
curl "http://localhost:8000/api/leaderboard?competition_id=1"

# 8. æŸ¥çœ‹CCIæ’è¡Œæ¦œ
curl "http://localhost:8000/api/leaderboard?competition_id=2"
```

### æ–¹æ³•2: ä½¿ç”¨æµ‹è¯•æ–‡ä»¶

**æµ‹è¯•PPIæäº¤**:
```bash
# ä½¿ç”¨sample_submission.csvæµ‹è¯•
curl -X POST "http://localhost:8000/api/submissions?competition_id=1" \
  -H "Authorization: Bearer $TOKEN" \
  -F "file=@kaggle_dataset/sample_submission.csv"
```

**æµ‹è¯•CCIæäº¤**:
éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ï¼Œæˆ–ä½¿ç”¨answeræ–‡ä»¶çš„æ ¼å¼åˆ›å»ºä¸€ä¸ªã€‚

---

## ğŸ“ å‰ç«¯é›†æˆè¯´æ˜

å‰ç«¯éœ€è¦åšä»¥ä¸‹ä¿®æ”¹ï¼ˆå·²æä¾›APIå’ŒStoreï¼‰ï¼š

### 1. åœ¨é¦–é¡µæ·»åŠ ç«èµ›é€‰æ‹©

```vue
<el-select v-model="competitionStore.selectedCompetitionId" @change="handleCompetitionChange">
  <el-option 
    v-for="comp in competitionStore.competitions"
    :key="comp.id"
    :label="comp.title"
    :value="comp.id"
  />
</el-select>
```

### 2. æäº¤é¡µé¢ä¼ é€’ç«èµ›ID

```javascript
import { useCompetitionStore } from '../stores/competition'

const competitionStore = useCompetitionStore()

// æäº¤æ—¶
await submissionAPI.submit(competitionStore.selectedCompetitionId, file)
```

### 3. æ’è¡Œæ¦œæŒ‰ç«èµ›ç­›é€‰

```javascript
// è·å–æŒ‡å®šç«èµ›çš„æ’è¡Œæ¦œ
leaderboard.value = await leaderboardAPI.getLeaderboard(competitionId)
```

### 4. ä¸‹è½½å¯¹åº”ç«èµ›çš„æ•°æ®é›†

```javascript
const url = downloadAPI.getDatasetUrl(competitionStore.selectedCompetitionId)
window.open(url, '_blank')
```

---

## ğŸ¨ å»ºè®®çš„å‰ç«¯æ”¹è¿›

1. **ç«èµ›åˆ‡æ¢å™¨**
   - åœ¨é¡¶éƒ¨å¯¼èˆªæ æ·»åŠ ç«èµ›é€‰æ‹©ä¸‹æ‹‰æ¡†
   - åˆ‡æ¢ç«èµ›æ—¶è‡ªåŠ¨åˆ·æ–°æ’è¡Œæ¦œ

2. **ç«èµ›è¯¦æƒ…é¡µ**
   - æ˜¾ç¤ºç«èµ›æè¿°
   - æ˜¾ç¤ºæ•°æ®æ ¼å¼
   - æ˜¾ç¤ºè¯„åˆ†æ ‡å‡†

3. **åˆ†ç«èµ›ç»Ÿè®¡**
   - æ¯ä¸ªç«èµ›ç‹¬ç«‹çš„ç»Ÿè®¡ä¿¡æ¯
   - æ¯ä¸ªç«èµ›ç‹¬ç«‹çš„æ’è¡Œæ¦œ

---

## âœ… éªŒè¯æ¸…å•

- [x] æ•°æ®åº“åŒ…å«Competitionè¡¨
- [x] åˆå§‹åŒ–æ—¶è‡ªåŠ¨åˆ›å»ºä¸¤ä¸ªç«èµ›
- [x] PPIè¯„åˆ†è„šæœ¬æ­£å¸¸å·¥ä½œ
- [x] CCIè¯„åˆ†è„šæœ¬æ­£å¸¸å·¥ä½œ
- [x] CCIæ•°æ®é›†å·²æ‰“åŒ…ï¼ˆdataset.tar.gzï¼‰
- [x] APIæ”¯æŒç«èµ›å‚æ•°
- [x] æ’è¡Œæ¦œå¯æŒ‰ç«èµ›ç­›é€‰
- [x] æ•°æ®ä¸‹è½½æ”¯æŒä¸åŒç«èµ›

---

## ğŸ”§ æ•…éšœæ’é™¤

### æ•°æ®åº“é”™è¯¯
```bash
# åˆ é™¤æ—§æ•°æ®åº“é‡æ–°åˆå§‹åŒ–
rm backend/quiz_platform.db
# é‡å¯åç«¯ä¼šè‡ªåŠ¨åˆ›å»ºæ–°æ•°æ®åº“å’Œç«èµ›
```

### ç«èµ›æ•°æ®æœªåˆå§‹åŒ–
æ£€æŸ¥åç«¯å¯åŠ¨æ—¥å¿—ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
```
âœ… ç«èµ›æ•°æ®åˆå§‹åŒ–å®Œæˆ
```

### CCIæ•°æ®é›†æ‰¾ä¸åˆ°
```bash
cd "cci test"
tar -czf dataset.tar.gz dataset/
```

---

**ç³»ç»Ÿå·²å°±ç»ªï¼ç°åœ¨ä½ æœ‰ä¸€ä¸ªæ”¯æŒå¤šç«èµ›çš„å®Œæ•´å¹³å°ï¼** ğŸ‰

